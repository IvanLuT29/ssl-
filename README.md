Для того, щоб дозволити кластеру Kubernetes авторизувати користувачів за допомогою не самопідписаного сертифіката, потрібно виконати кілька кроків

1. Створіть файл `tokens.csv` в каталозі `/etc/ca-certificates` на вузлах керування Kubernetes. В цьому файлі визначите спосіб авторизації користувачів за допомогою токенів. Це файл 1.sql

2. Внести зміни в конфігураційний файл `kube-apiserver.yaml`. Цей файл зазвичай знаходиться в каталозі `/etc/kubernetes/manifests` на вузлах керування Kubernetes. Також потрібно додати параметр `--token-auth-file=/etc/ca-certificates/tokens.csv` до команди kube-apiserver в цьому файлі. Приклад 1.yaml

3. Після внесення цих змін перезапустити kube-apiserver, щоб зміни набули чинності. Також можно видалити  існуючий pod kube-apiserver, і kubernetes автоматично перезапустить його. Команда з файлу 1.sh

4. Після перезапуску kube-apiserver,  кластер Kubernetes має підтримувати аутентифікацію користувачів за допомогою токенів, визначених у файлі `tokens.csv`.